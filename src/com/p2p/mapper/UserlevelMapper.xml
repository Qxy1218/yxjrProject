<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.p2p.mapper.UserlevelMapper">
	<resultMap id="BaseResultMap" type="com.p2p.pojo.Userlevel">
		<id column="ul_id" property="ulid"/> 
		<result column="ul_name" property="ulname"/>  
		<result column="ul_levelValue" property="ullevelValue"/> 
		<result column="u_id" property="uid"/> 
		
		
		 <!--配置一对一 -->
		  <!-- <association property="user" javaType="com.p2p.pojo.User">
		  	<id column="u_id" property="uid"/>
			<result column="u_password" property="upassword"/>   
			<result column="u_headImg" property="uheadImg"/>  
			<result column="u_phone" property="uphone"/>  
			<result column="u_regTime" property="uregTime"/> 
			<result column="u_loginTime" property="uloginTime"/> 
			<result column="order_invite" property="orderinvite"/> 
			<result column="u_invite" property="uinvite"/> 
			<result column="u_enable" property="uenable"/> 
			<result column="u_isAccountSum" property="uisAccountSum"/>  
			<result column="qr_code" property="qrcode"/>  
			<result column="u_address" property="uaddress"/>  
			<result column="u_ip" property="uip"/>  
			<result column="u_credit" property="ucredit"/>  
			<result column="u_balance" property="ubalance"/>  
			<result column="ul_id" property="ulid"/>  
			<result column="vd_id" property="vdid"/>  
		  </association> -->
    </resultMap>
	 <!-- 查询 -->
	<select id="getAllModel"  resultMap="BaseResultMap">
 		select ul.ul_id,ul.ul_name,ul.ul_levelValue,ul.u_id,ui.ui_name,u.u_id  from  user_level ul ,user u ,user_info ui 
		<where>
			 ul.u_id = u.u_id and ui.u_id = u.u_id
		</where>
 	</select>
 	  <!-- 查询 -->
    <select id="selectPage" resultMap="BaseResultMap">
		select ul.ul_id,ul.ul_name,ul.ul_levelValue,ul.u_id,ui.ui_name as uiname,u.u_id  from  user_level ul ,user u ,user_info ui 
		<where>
			 ul.u_id = u.u_id and ui.u_id = u.u_id
		</where>
		        
    </select>
    <!-- 查询 -->
    <select id="UserlevelCount" resultType="java.lang.Integer">
        select count(*) from user_level;
    </select>
     <!-- 增加 -->
	<insert id="addModel" useGeneratedKeys="true" keyProperty="ulid">
 		 insert into user_level(ul_name,ul_levelValue,u_id) 
 		 values(#{ulname},#{ullevelValue},#{uid})
 	</insert>
 	 <!-- 删除-->
    <delete id="delete" parameterType="com.p2p.pojo.Userlevel">
        DELETE FROM user_level WHERE ul_id=#{ulid}
    </delete>
     <!-- 修改-->
    <update id="update" parameterType="com.p2p.pojo.Userlevel" >
        UPDATE user_level SET
        	ul_name = #{ulname},
			ul_levelValue=#{ullevelValue},
			u_id =#{uid}
		WHERE ul_id=#{ulid}
    </update>
</mapper>